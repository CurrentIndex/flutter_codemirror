import{V as ie,D as f,E as p,c as Ue,a as Ve,g as I,S,F as se,b as re,C as v,d as k,P as Ne,f as _e,e as oe,s as ae,R as Ke,h as R,i as Ce,r as He,j as Qe,W as Ge,l as Ye,k as Ze,m as Je,n as Xe,o as et,p as tt,q as nt,t as it,u as st,v as rt,w as ot,x as at,y as lt,z as ct,A as ht,B as ut,G as ft,H as we,I as dt,J as mt,K as gt,L as pt,M as xt,N as bt,O as Z,Q as yt,T as vt,U as St,X as Ct,Y as wt,Z as kt,_ as Mt,$ as C,a0 as Dt,a1 as Lt,a2 as At}from"./index.f47ce078.js";function u(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?t.setAttribute(i,s):s!=null&&(t[i]=s)}e++}for(;e<arguments.length;e++)ke(t,arguments[e]);return t}function ke(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)ke(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const ge=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class O{constructor(e,n,i=0,s=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?a=>r(ge(a)):ge,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Ue(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=_e(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ve(e);let s=this.normalize(n);for(let r=0,o=i;;r++){let a=s.charCodeAt(r),l=this.match(a,o);if(l)return this.value=l,this;if(r==s.length-1)break;o==i&&r<n.length&&n.charCodeAt(r)==a&&o++}}}match(e,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let r=this.matches[s],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[s+1],to:n+1}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(O.prototype[Symbol.iterator]=function(){return this});const Me={from:-1,to:-1,match:/.*/.exec("")},le="gm"+(/x/.unicode==null?"":"u");class De{constructor(e,n,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Me,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new Le(e,n,i,s,r);this.re=new RegExp(n,le+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=N(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=N(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const J=new WeakMap;class W{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=J.get(e);if(!s||s.from>=i||s.to<=n){let a=new W(n,e.sliceString(n,i));return J.set(e,a),a}if(s.from==n&&s.to==i)return s;let{text:r,from:o}=s;return o>n&&(r=e.sliceString(n,o)+r,o=n),s.to<i&&(r+=e.sliceString(s.to,i)),J.set(e,new W(o,r)),new W(n,r.slice(n-o,i-o))}}class Le{constructor(e,n,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=Me,this.matchPos=N(e,s),this.re=new RegExp(n,le+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=W.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=N(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=W.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=Le.prototype[Symbol.iterator]=function(){return this});function Pt(t){try{return new RegExp(t,le),!0}catch{return!1}}function N(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function te(t){let e=u("input",{class:"cm-textfield",name:"line"}),n=u("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:_.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},u("label",t.state.phrase("Go to line"),": ",e)," ",u("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:r}=t,o=r.doc.lineAt(r.selection.main.head),[,a,l,c,h]=s,d=c?+c.slice(1):0,g=l?+l:o.number;if(l&&h){let E=g/100;a&&(E=E*(a=="-"?-1:1)+o.number/r.doc.lines),g=Math.round(r.doc.lines*E)}else l&&a&&(g=g*(a=="-"?-1:1)+o.number);let B=r.doc.line(Math.max(1,Math.min(r.doc.lines,g)));t.dispatch({effects:_.of(!1),selection:k.cursor(B.from+Math.max(0,Math.min(d,B.length))),scrollIntoView:!0}),t.focus()}return{dom:n}}const _=S.define(),pe=oe.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(_)&&(t=n.value);return t},provide:t=>ae.from(t,e=>e?te:null)}),Ft=t=>{let e=I(t,te);if(!e){let n=[_.of(!0)];t.state.field(pe,!1)==null&&n.push(S.appendConfig.of([pe,Rt])),t.dispatch({effects:n}),e=I(t,te)}return e&&e.dom.querySelector("input").focus(),!0},Rt=p.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Wt={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ae=se.define({combine(t){return re(t,Wt,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function Ot(t){let e=[qt,jt];return t&&e.push(Ae.of(t)),e}const Tt=f.mark({class:"cm-selectionMatch"}),Et=f.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function xe(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=v.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=v.Word)}function It(t,e,n,i){return t(e.sliceDoc(n,n+1))==v.Word&&t(e.sliceDoc(i-1,i))==v.Word}const jt=ie.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Ae),{state:n}=t,i=n.selection;if(i.ranges.length>1)return f.none;let s=i.main,r,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return f.none;let l=n.wordAt(s.head);if(!l)return f.none;o=n.charCategorizer(s.head),r=n.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<e.minSelectionLength||l>200)return f.none;if(e.wholeWords){if(r=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!(xe(o,n,s.from,s.to)&&It(o,n,s.from,s.to)))return f.none}else if(r=n.sliceDoc(s.from,s.to).trim(),!r)return f.none}let a=[];for(let l of t.visibleRanges){let c=new O(n.doc,r,l.from,l.to);for(;!c.next().done;){let{from:h,to:d}=c.value;if((!o||xe(o,n,h,d))&&(s.empty&&h<=s.from&&d>=s.to?a.push(Et.range(h,d)):(h>=s.to||d<=s.from)&&a.push(Tt.range(h,d)),a.length>e.maxMatches))return f.none}}return f.set(a)}},{decorations:t=>t.decorations}),qt=p.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Bt=({state:t,dispatch:e})=>{let{selection:n}=t,i=k.create(n.ranges.map(s=>t.wordAt(s.head)||k.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function $t(t,e){let{main:n,ranges:i}=t.selection,s=t.wordAt(n.head),r=s&&s.from==n.from&&s.to==n.to;for(let o=!1,a=new O(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new O(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(r){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const zt=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(r=>r.from===r.to))return Bt({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let s=$t(t,i);return s?(e(t.update({selection:t.selection.addRange(k.range(s.from,s.to),!1),effects:p.scrollIntoView(s.to)})),!0):!1},ce=se.define({combine(t){return re(t,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new Xt(e)})}});class Pe{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Pt(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new _t(this):new Vt(this)}getCursor(e,n=0,i){let s=e.doc?e:R.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?A(this,s,n,i):L(this,s,n,i)}}class Fe{constructor(e){this.spec=e}}function L(t,e,n,i){return new O(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:s=>s.toLowerCase(),t.wholeWord?Ut(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Ut(t,e){return(n,i,s,r)=>((r>n||r+s.length<i)&&(r=Math.max(0,n-2),s=t.sliceString(r,Math.min(t.length,i+2))),(e(K(s,n-r))!=v.Word||e(H(s,n-r))!=v.Word)&&(e(H(s,i-r))!=v.Word||e(K(s,i-r))!=v.Word))}class Vt extends Fe{constructor(e){super(e)}nextMatch(e,n,i){let s=L(this.spec,e,i,e.doc.length).nextOverlapping();return s.done&&(s=L(this.spec,e,0,n).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let r=Math.max(n,s-1e4-this.spec.unquoted.length),o=L(this.spec,e,r,s),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==n)return null;s-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=L(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=L(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function A(t,e,n,i){return new De(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?Nt(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function K(t,e){return t.slice(Ce(t,e,!1),e)}function H(t,e){return t.slice(e,Ce(t,e))}function Nt(t){return(e,n,i)=>!i[0].length||(t(K(i.input,i.index))!=v.Word||t(H(i.input,i.index))!=v.Word)&&(t(H(i.input,i.index+i[0].length))!=v.Word||t(K(i.input,i.index+i[0].length))!=v.Word)}class _t extends Fe{nextMatch(e,n,i){let s=A(this.spec,e,i,e.doc.length).next();return s.done&&(s=A(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let r=Math.max(n,i-s*1e4),o=A(this.spec,e,r,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(r==n||a.from>r+10))return a;if(r==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n))}matchAll(e,n){let i=A(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=A(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const j=S.define(),he=S.define(),w=oe.define({create(t){return new X(ne(t).create(),null)},update(t,e){for(let n of e.effects)n.is(j)?t=new X(n.value.create(),t.panel):n.is(he)&&(t=new X(t.query,n.value?ue:null));return t},provide:t=>ae.from(t,e=>e.panel)});class X{constructor(e,n){this.query=e,this.panel=n}}const Kt=f.mark({class:"cm-searchMatch"}),Ht=f.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Qt=ie.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(w))}update(t){let e=t.state.field(w);(e!=t.startState.field(w)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return f.none;let{view:n}=this,i=new Ke;for(let s=0,r=n.visibleRanges,o=r.length;s<o;s++){let{from:a,to:l}=r[s];for(;s<o-1&&l>r[s+1].from-2*250;)l=r[++s].to;t.highlight(n.state,a,l,(c,h)=>{let d=n.state.selection.ranges.some(g=>g.from==c&&g.to==h);i.add(c,h,d?Ht:Kt)})}return i.finish()}},{decorations:t=>t.decorations});function q(t){return e=>{let n=e.state.field(w,!1);return n&&n.query.spec.valid?t(e,n):Re(e)}}const Q=q((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);return i?(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:fe(t,i),userEvent:"select.search"}),!0):!1}),G=q((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);return s?(t.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:fe(t,s),userEvent:"select.search"}),!0):!1}),Gt=q((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:k.create(n.map(i=>k.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),Yt=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,r=[],o=0;for(let a=new O(t.doc,t.sliceDoc(i,s));!a.next().done;){if(r.length>1e3)return!1;a.value.from==i&&(o=r.length),r.push(k.range(a.value.from,a.value.to))}return e(t.update({selection:k.create(r,o),userEvent:"select.search.matches"})),!0},be=q((t,{query:e})=>{let{state:n}=t,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,i,i);if(!r)return!1;let o=[],a,l,c=[];if(r.from==i&&r.to==s&&(l=n.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:l}),r=e.nextMatch(n,r.from,r.to),c.push(p.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),r){let h=o.length==0||o[0].from>=r.to?0:r.to-r.from-l.length;a={anchor:r.from-h,head:r.to-h},c.push(fe(t,r))}return t.dispatch({changes:o,selection:a,scrollIntoView:!!a,effects:c,userEvent:"input.replace"}),!0}),Zt=q((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:r,to:o}=s;return{from:r,to:o,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:p.announce.of(i),userEvent:"input.replace.all"}),!0});function ue(t){return t.state.facet(ce).createPanel(t)}function ne(t,e){var n,i,s,r;let o=t.selection.main,a=o.empty||o.to>o.from+100?"":t.sliceDoc(o.from,o.to);if(e&&!a)return e;let l=t.facet(ce);return new Pe({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:l.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:l.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:l.literal,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:l.wholeWord})}const Re=t=>{let e=t.state.field(w,!1);if(e&&e.panel){let n=I(t,ue);if(!n)return!1;let i=n.dom.querySelector("[main-field]");if(i&&i!=t.root.activeElement){let s=ne(t.state,e.query.spec);s.valid&&t.dispatch({effects:j.of(s)}),i.focus(),i.select()}}else t.dispatch({effects:[he.of(!0),e?j.of(ne(t.state,e.query.spec)):S.appendConfig.of(tn)]});return!0},We=t=>{let e=t.state.field(w,!1);if(!e||!e.panel)return!1;let n=I(t,ue);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:he.of(!1)}),!0},Jt=[{key:"Mod-f",run:Re,scope:"editor search-panel"},{key:"F3",run:Q,shift:G,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Q,shift:G,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:We,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Yt},{key:"Alt-g",run:Ft},{key:"Mod-d",run:zt,preventDefault:!0}];class Xt{constructor(e){this.view=e;let n=this.query=e.state.field(w).query.spec;this.commit=this.commit.bind(this),this.searchField=u("input",{value:n.search,placeholder:b(e,"Find"),"aria-label":b(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=u("input",{value:n.replace,placeholder:b(e,"Replace"),"aria-label":b(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=u("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=u("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=u("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,r,o){return u("button",{class:"cm-button",name:s,onclick:r,type:"button"},o)}this.dom=u("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>Q(e),[b(e,"next")]),i("prev",()=>G(e),[b(e,"previous")]),i("select",()=>Gt(e),[b(e,"all")]),u("label",null,[this.caseField,b(e,"match case")]),u("label",null,[this.reField,b(e,"regexp")]),u("label",null,[this.wordField,b(e,"by word")]),...e.state.readOnly?[]:[u("br"),this.replaceField,i("replace",()=>be(e),[b(e,"replace")]),i("replaceAll",()=>Zt(e),[b(e,"replace all")])],u("button",{name:"close",onclick:()=>We(e),"aria-label":b(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Pe({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:j.of(e)}))}keydown(e){He(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?G:Q)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),be(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(j)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ce).top}}function b(t,e){return t.state.phrase(e)}const $=30,z=/[\s\.,:;?!]/;function fe(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,r=Math.max(i.from,e-$),o=Math.min(s,n+$),a=t.state.sliceDoc(r,o);if(r!=i.from){for(let l=0;l<$;l++)if(!z.test(a[l+1])&&z.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-$;l--)if(!z.test(a[l-1])&&z.test(a[l])){a=a.slice(0,l);break}}return p.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const en=p.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),tn=[w,Ne.lowest(Qt),en];class nn{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class M{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=e,r=i.facet(F).markerFilter;r&&(s=r(s));let o=f.set(s.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?f.widget({widget:new dn(a),diagnostic:a}).range(a.from):f.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new M(o,n,T(o))}}function T(t,e=null,n=0){let i=null;return t.between(n,1e9,(s,r,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new nn(s,r,o.diagnostic),!1}),i}function sn(t,e){return!!(t.effects.some(n=>n.is(de))||t.changes.touchesRange(e.pos))}function Oe(t,e){return t.field(y,!1)?e:e.concat(S.appendConfig.of([y,p.decorations.compute([y],n=>{let{selected:i,panel:s}=n.field(y);return!i||!s||i.from==i.to?f.none:f.set([on.range(i.from,i.to)])}),Qe(an,{hideOn:sn}),gn]))}function rn(t,e){return{effects:Oe(t,[de.of(e)])}}const de=S.define(),me=S.define(),Te=S.define(),y=oe.define({create(){return new M(f.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=T(n,t.selected.diagnostic,s)||T(n,null,s)}t=new M(n,t.panel,i)}for(let n of e.effects)n.is(de)?t=M.init(n.value,t.panel,e.state):n.is(me)?t=new M(t.diagnostics,n.value?Y.open:null,t.selected):n.is(Te)&&(t=new M(t.diagnostics,t.panel,n.value));return t},provide:t=>[ae.from(t,e=>e.panel),p.decorations.from(t,e=>e.diagnostics)]}),on=f.mark({class:"cm-lintRange cm-lintRange-active"});function an(t,e,n){let{diagnostics:i}=t.state.field(y),s=[],r=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:h})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(s.push(h.diagnostic),r=Math.min(l,r),o=Math.max(c,o))});let a=t.state.facet(F).tooltipFilter;return a&&(s=a(s)),s.length?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:ln(t,s)}}}:null}function ln(t,e){return u("ul",{class:"cm-tooltip-lint"},e.map(n=>Ie(t,n,!1)))}const cn=t=>{let e=t.state.field(y,!1);(!e||!e.panel)&&t.dispatch({effects:Oe(t.state,[me.of(!0)])});let n=I(t,Y.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},ye=t=>{let e=t.state.field(y,!1);return!e||!e.panel?!1:(t.dispatch({effects:me.of(!1)}),!0)},hn=t=>{let e=t.state.field(y,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},un=[{key:"Mod-Shift-m",run:cn,preventDefault:!0},{key:"F8",run:hn}],fn=ie.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(F);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(F);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((r,o)=>r.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(rn(this.view.state,s))},i=>{Ye(this.view.state,i)})}}update(t){let e=t.state.facet(F);(t.docChanged||e!=t.startState.facet(F))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),F=se.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},re(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:fn});function Ee(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Ie(t,e,n){var i;let s=n?Ee(e.actions):[];return u("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},u("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let a=d=>{d.preventDefault();let g=T(t.state.field(y).diagnostics,e);g&&r.apply(t,g.from,g.to)},{name:l}=r,c=s[o]?l.indexOf(s[o]):-1,h=c<0?l:[l.slice(0,c),u("u",l.slice(c,c+1)),l.slice(c+1)];return u("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${c<0?"":` (access key "${s[o]})"`}.`},h)}),e.source&&u("div",{class:"cm-diagnosticSource"},e.source))}class dn extends Ge{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return u("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ve{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Ie(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Y{constructor(e){this.view=e,this.items=[];let n=s=>{if(s.keyCode==27)ye(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Ee(r.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==s.keyCode){let l=T(this.view.state.field(y).diagnostics,r);l&&r.actions[a].apply(e,l.from,l.to)}}else return;s.preventDefault()},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=u("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=u("div",{class:"cm-panel-lint"},this.list,u("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>ye(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(y).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(y),i=0,s=!1,r=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,h;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(h=new ve(this.view,l.diagnostic),this.items.splice(i,0,h),s=!0):(h=this.items[c],c>i&&(this.items.splice(i,c-i),s=!0)),n&&h.diagnostic==n.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),r=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new ve(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{o.top<a.top?this.list.scrollTop-=a.top-o.top:o.bottom>a.bottom&&(this.list.scrollTop+=o.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(y),i=T(n.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Te.of(i)})}static open(e){return new Y(e)}}function mn(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ee(t){return mn(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const gn=p.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ee("#d11")},".cm-lintRange-warning":{backgroundImage:ee("orange")},".cm-lintRange-info":{backgroundImage:ee("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),pn=(()=>[Ze(),Je(),Xe(),et(),tt(),nt(),it(),R.allowMultipleSelections.of(!0),st(),rt(ot,{fallback:!0}),at(),lt(),ct(),ht(),ut(),ft(),Ot(),we.of([...dt,...mt,...Jt,...gt,...pt,...xt,...un])])();/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var xn=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[pn]}),je=Symbol("vue-codemirror-global-config"),m,bn=function(t){var e=t.onUpdate,n=t.onChange,i=t.onFocus,s=t.onBlur,r=function(o,a){var l={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&a.indexOf(c)<0&&(l[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(c=Object.getOwnPropertySymbols(o);h<c.length;h++)a.indexOf(c[h])<0&&Object.prototype.propertyIsEnumerable.call(o,c[h])&&(l[c[h]]=o[c[h]])}return l}(t,["onUpdate","onChange","onFocus","onBlur"]);return R.create({doc:r.doc,selection:r.selection,extensions:(Array.isArray(r.extensions)?r.extensions:[r.extensions]).concat([p.updateListener.of(function(o){e(o),o.docChanged&&n(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?i(o):s(o))})])})},P=function(t){var e=new At;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:S.appendConfig.of(e.of(n))})}}},Se=function(t,e){var n=P(t),i=n.compartment,s=n.run;return function(r){var o=i.get(t.state);s((r!=null?r:o!==e)?e:[])}},U={type:Boolean,default:void 0},yn={autofocus:U,disabled:U,indentWithTab:U,tabSize:Number,placeholder:String,style:Object,autoDestroy:U,phrases:Object,root:Object,extensions:Array,selection:Object},vn={modelValue:{type:String,default:""}},Sn=Object.assign(Object.assign({},yn),vn);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(m||(m={}));var D={};D[m.Change]=function(t,e){return!0},D[m.Update]=function(t){return!0},D[m.Focus]=function(t){return!0},D[m.Blur]=function(t){return!0},D[m.Ready]=function(t){return!0};var qe={};qe[m.ModelUpdate]=D[m.Change];var Cn=Object.assign(Object.assign({},D),qe),V=bt({name:"VueCodemirror",props:Object.assign({},Sn),emits:Object.assign({},Cn),setup:function(t,e){var n=Z(),i=Z(),s=Z(),r=Object.assign(Object.assign({},xn),yt(je,{})),o=vt(function(){var a={};return Object.keys(St(t)).forEach(function(l){var c;l!=="modelValue"&&(a[l]=(c=t[l])!==null&&c!==void 0?c:r[l])}),a});return Ct(function(){var a;i.value=bn({doc:t.modelValue,selection:o.value.selection,extensions:(a=r.extensions)!==null&&a!==void 0?a:[],onFocus:function(c){return e.emit(m.Focus,c)},onBlur:function(c){return e.emit(m.Blur,c)},onUpdate:function(c){return e.emit(m.Update,c)},onChange:function(c,h){c!==t.modelValue&&(e.emit(m.Change,c,h),e.emit(m.ModelUpdate,c,h))}}),s.value=function(c){return new p(Object.assign({},c))}({state:i.value,parent:n.value,root:o.value.root});var l=function(c){var h=function(){return c.state.doc.toString()},d=P(c).run,g=Se(c,[p.editable.of(!1),R.readOnly.of(!0)]),B=Se(c,we.of([wt])),E=P(c).run,Be=P(c).run,$e=P(c).run,ze=P(c).run;return{focus:function(){return c.focus()},getDoc:h,setDoc:function(x){x!==h()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:x}})},reExtensions:d,toggleDisabled:g,toggleIndentWithTab:B,setTabSize:function(x){E([R.tabSize.of(x),kt.of(" ".repeat(x))])},setPhrases:function(x){Be([R.phrases.of(x)])},setPlaceholder:function(x){$e(Mt(x))},setStyle:function(x){x===void 0&&(x={}),ze(p.theme({"&":Object.assign({},x)}))}}}(s.value);C(function(){return t.modelValue},function(c){c!==l.getDoc()&&l.setDoc(c)}),C(function(){return t.extensions},function(c){return l.reExtensions(c||[])},{immediate:!0}),C(function(){return o.value.disabled},function(c){return l.toggleDisabled(c)},{immediate:!0}),C(function(){return o.value.indentWithTab},function(c){return l.toggleIndentWithTab(c)},{immediate:!0}),C(function(){return o.value.tabSize},function(c){return l.setTabSize(c)},{immediate:!0}),C(function(){return o.value.phrases},function(c){return l.setPhrases(c||{})},{immediate:!0}),C(function(){return o.value.placeholder},function(c){return l.setPlaceholder(c)},{immediate:!0}),C(function(){return o.value.style},function(c){return l.setStyle(c)},{immediate:!0}),o.value.autofocus&&l.focus(),e.emit(m.Ready,{state:i.value,view:s.value,container:n.value})}),Dt(function(){o.value.autoDestroy&&s.value&&function(a){a.destroy()}(s.value)}),function(){return Lt("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),wn=V,kn=function(t,e){t.component(V.name,V),t.component("Codemirror",V),function(n,i){n.provide(je,i)}(t,e)},Dn={Codemirror:wn,install:kn};export{wn as Codemirror,xn as DEFAULT_CONFIG,Dn as default,kn as install};
